<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 900 600" font-family="system-ui, -apple-system, sans-serif">
  <defs>
    <linearGradient id="primary" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" stop-color="#8b5cf6" />
      <stop offset="100%" stop-color="#6d28d9" />
    </linearGradient>
    <filter id="shadow" x="-10%" y="-10%" width="120%" height="120%">
      <feDropShadow dx="0" dy="4" stdDeviation="4" flood-color="#000" flood-opacity="0.25"/>
    </filter>
    <marker id="arrow" viewBox="0 0 10 10" refX="8" refY="5" markerWidth="6" markerHeight="6" orient="auto-start-reverse">
        <path d="M 0 0 L 10 5 L 0 10 z" fill="#94a3b8" />
    </marker>
  </defs>

  <rect width="900" height="600" fill="#0f172a" />
  
  <text x="450" y="45" fill="#f8fafc" font-size="28" font-weight="800" text-anchor="middle">Tournament Lifecycle &amp; State Flow</text>

  <!-- Lifecycle Nodes -->
  <g filter="url(#shadow)">
    <!-- Node 1: Draft Mode -->
    <rect x="50" y="100" width="220" height="80" rx="12" fill="#1e293b" stroke="#64748b" stroke-width="2"/>
    <text x="160" y="130" fill="#f8fafc" font-size="18" font-weight="700" text-anchor="middle">1. Draft Created</text>
    <text x="160" y="155" fill="#94a3b8" font-size="14" font-weight="500" text-anchor="middle">status: "draft"</text>
    <rect x="60" y="105" width="20" height="20" rx="10" fill="#64748b"/>
    
    <!-- Node 2: Setup -->
    <rect x="340" y="100" width="220" height="80" rx="12" fill="#1e293b" stroke="#3b82f6" stroke-width="2"/>
    <text x="450" y="130" fill="#f8fafc" font-size="18" font-weight="700" text-anchor="middle">2. Players &amp; Teams</text>
    <text x="450" y="155" fill="#94a3b8" font-size="14" font-weight="500" text-anchor="middle">Draft Roster Selected</text>
    <rect x="350" y="105" width="20" height="20" rx="10" fill="#3b82f6"/>

    <!-- Node 3: Active Pools -->
    <rect x="630" y="100" width="220" height="80" rx="12" fill="#1e293b" stroke="#10b981" stroke-width="2"/>
    <text x="740" y="130" fill="#f8fafc" font-size="18" font-weight="700" text-anchor="middle">3. Active / Pool Play</text>
    <text x="740" y="155" fill="#10b981" font-size="14" font-weight="500" text-anchor="middle">status: "active"</text>
    <rect x="640" y="105" width="20" height="20" rx="10" fill="#10b981"/>

    <!-- Node 4: Knockouts -->
    <rect x="630" y="280" width="220" height="80" rx="12" fill="#1e293b" stroke="#f59e0b" stroke-width="2"/>
    <text x="740" y="310" fill="#f8fafc" font-size="18" font-weight="700" text-anchor="middle">4. Knockouts Phase</text>
    <text x="740" y="335" fill="#f59e0b" font-size="14" font-weight="500" text-anchor="middle">Bracket Matches Built</text>
    <rect x="640" y="285" width="20" height="20" rx="10" fill="#f59e0b"/>

    <!-- Node 5: Champion -->
    <rect x="630" y="460" width="220" height="80" rx="12" fill="url(#primary)"/>
    <text x="740" y="490" fill="#ffffff" font-size="18" font-weight="700" text-anchor="middle">5. Tournament Done</text>
    <text x="740" y="515" fill="#fcd34d" font-size="14" font-weight="600" text-anchor="middle">status: "done" (Winner)</text>
    <rect x="640" y="465" width="20" height="20" rx="10" fill="#fcd34d"/>
  </g>

  <!-- Arrows connecting nodes -->
  <path d="M 270 140 L 330 140" stroke="#94a3b8" stroke-width="3" fill="none" marker-end="url(#arrow)"/>
  <path d="M 560 140 L 620 140" stroke="#94a3b8" stroke-width="3" fill="none" marker-end="url(#arrow)"/>
  <path d="M 740 180 L 740 270" stroke="#94a3b8" stroke-width="3" fill="none" marker-end="url(#arrow)"/>
  <path d="M 740 360 L 740 450" stroke="#94a3b8" stroke-width="3" fill="none" marker-end="url(#arrow)"/>

  <!-- Left Side Data Processes Box -->
  <g filter="url(#shadow)">
    <rect x="50" y="250" width="510" height="290" rx="8" fill="#1e293b" stroke="#334155" stroke-width="2"/>
    <text x="305" y="280" fill="#f8fafc" font-size="16" font-weight="600" text-anchor="middle">Data Triggers &amp; Background Processes</text>
    
    <rect x="70" y="300" width="470" height="40" rx="4" fill="#0f172a" />
    <text x="90" y="325" fill="#3b82f6" font-size="14" font-weight="700">Auto-Generate Pools:</text>
    <text x="240" y="325" fill="#94a3b8" font-size="14">Web Worker handles combinatorics and matches.</text>
    
    <rect x="70" y="350" width="470" height="40" rx="4" fill="#0f172a" />
    <text x="90" y="375" fill="#10b981" font-size="14" font-weight="700">Live Scoring (Tx):</text>
    <text x="220" y="375" fill="#94a3b8" font-size="14">Optimistic UI -> Event Queue -> Cloud Function (Idempotent).</text>
    
    <rect x="70" y="400" width="470" height="40" rx="4" fill="#0f172a" />
    <text x="90" y="425" fill="#f59e0b" font-size="14" font-weight="700">Standings Engine:</text>
    <text x="220" y="425" fill="#94a3b8" font-size="14">Web Worker sorts by W/L, Point Diff to identify qualifiers.</text>
    
    <rect x="70" y="450" width="470" height="40" rx="4" fill="#0f172a" />
    <text x="90" y="475" fill="#8b5cf6" font-size="14" font-weight="700">Global Leaderboard:</text>
    <text x="235" y="475" fill="#94a3b8" font-size="14">Aggregated by Cloud Functions on match completion.</text>
  </g>

  <!-- Connecting dashed lines from Processes to Lifecycle -->
  <path d="M 560 320 L 670 180" stroke="#3b82f6" stroke-width="2" stroke-dasharray="4 4" fill="none"/>
  <path d="M 560 420 L 620 320" stroke="#f59e0b" stroke-width="2" stroke-dasharray="4 4" fill="none"/>
  <path d="M 560 470 L 620 500" stroke="#8b5cf6" stroke-width="2" stroke-dasharray="4 4" fill="none"/>
</svg>
